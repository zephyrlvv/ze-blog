# 每日目标

- 掌握小程序的支付流程
- 掌握小程序的支付接口使用
- 掌握小程序获取用户收货地址接口的使用

# 支付

步骤

1. 获取用户地址，通过 uni.chooseAddress

2. 获取支付需要的token

   2.1 没有token的情况下，需要去到授权页面进行授权

3. 创建订单，获取订单的编号

4. 获取支付需要的参数

5. 调用支付接口

6. 查询支付状态

7. 支付成功后，删除本地已支付的购物小车中商品的数据

8. 跳转到订单页面

准备工作

1. 换AppID

```
wx45f217ba2cb42557
```

2. 换 Url

```js
https://www.xiaomage.tech/api/public/v1/
```

3. 微信账号添加到 管理后台

   将微信号统一收集，提交给班长（代理）（要体验微信支付的同学）

## 微信支付流程

分析：说明小程序支付流程

> 微信支付，在小程序端要做三件事

1. 使用**`wx.login`**获取临时登录凭证code,发送到后端获取openId=>微信登录
2. 将**`openId`**以及相应需要的商品信息发送到后端，换取服务端进行支付的签名等信息=>创建订单
3. 接收返回的信息（必须要包含发起微信支付**`wx.requestPayment的参数`**），发起微信支付

前端：主要处理第三步，获取支付信息，调起支付窗口

扩展阅读：[支付业务流程](https://pay.weixin.qq.com/wiki/doc/api/wxa/wxa_api.php?chapter=7_4&index=3)

![1625454398554](大纲.assets/1625454398554.png)

## 落地代码

```vue
<template>
	<view class="yg-pay">
		<view class="yg-pay-content">
			<!-- 选择地址区域的开始 -->
			<view class="pay-content-address">
				<!-- a.5 根据 address 中的信息 渲染界面 -->
				<view class="pay-content-detail" v-if="address.userName">
					<view class="content-address-all">
						{{address.provinceName+address.cityName+address.countyName+address.detailInfo}}
					</view>
					<view class="content-address-user">
						<view class="username">
							{{address.userName}}
						</view>
						<view class="telNumber">
							{{address.telNumber}}
						</view>
						
					</view>
				</view>
				<view v-else class="content-address-btn" @click="chooseAddress">
					选择地址
				</view>
			</view>
			<!-- 选择地址区域的结束 -->
			<!-- 已选商品开始 -->
			<view class="pay-content-choose">
				<view class="title">
					已选商品
				</view>
				<view class="content-choose-list">
					<view class="choose-list-item" v-for="(item,index) in carts" :key="item.goods_id">
						<view class="list-item-left">
							<image :src="item.goods_big_logo" mode=""></image>
						</view>
						<view class="list-item-right">
							<view class="list-item-top">
								{{item.goods_name}}
							</view>
							<view class="list-item-bottom">
								<view class="left">
									￥{{item.goods_price}}
								</view>
								<view class="right">
									X{{item.num}}
								</view>
							</view>
						</view>

					</view>

				</view>
			</view>
			<!-- 已选商品结束-->
		</view>
		<view class="yg-pay-bottom">
			<view class="pay-bottom-left">
				合计：<text class="text">￥{{totalPrice}}</text>
			</view>
			<view class="pay-bottom-right">
				<view class="bottom-right-btn" v-if="address.userName" @click="handlePay">
					去支付({{totalNum}})
				</view>
				<view v-else class="bottom-right-disable">
					去支付({{totalNum}})
				</view>
			</view>
		</view>
	</view>
</template>

<script>
	import {request} from "@/request/request.js"
	import {requestPayment} from "@/ajaxUtil/index.js"
	export default {
		onShow: function() {
			// a.6 获取本地缓存中的地址
			let address = uni.getStorageSync("address")||{};
			this.address = address;
			let carts = uni.getStorageSync("carts") || [];
			// 过滤购物小车中已选商品的数据
			this.carts = carts.filter(v=>v.checked);
		},
		data() {
			return {
				carts: [],
				// a.2 定义一个address 用来存储地址
				address:{}
			};
		},
		// 计算总价
		computed:{
			totalPrice:function(){
				let totalPrice = 0;
				this.carts.forEach(v=>{
					totalPrice+=v.goods_price*v.num
				})
				return totalPrice;
			},
			totalNum:function(){
				let num = 0;
				this.carts.forEach(v=>{
					num+=v.num;
				})
				return num;
			},
		},
		methods:{
			chooseAddress:function(){
				console.log("选择地址");
				// a.1 通过 chooseAddress接口获取用户的收货的信息
				// https://uniapp.dcloud.net.cn/api/other/choose-address?id=chooseaddress
				uni.chooseAddress({
					success: (res) => {
						console.log(res);
						// a.3 将结果赋值给 data中 address
						this.address = res;
						// a.4 地址存到本地缓存中
						uni.setStorageSync("address",res);
					}
				})
			},
			handlePay:async function(){
				console.log("开始支付了");
				// 开始整个支付的流程
				let token = uni.getStorageSync("token")||"";
				if(!token){
					// 如果token不存在，跳转到授权页面去获取token
					uni.showToast({
						title:"支付前先授权"
					})
					uni.navigateTo({
						url:"/pages/auth/auth"
					})
					return false;
				}
				console.log("继续执行支付的过程");
				// 继续执行
				try{
				 // 创建订单，订单的编号
				 //构造请求体的参数
				 let address = this.address;
				 let params = {
					 order_price:this.totalPrice,
					 consignee_addr:address.provinceName+address.cityName+address.countyName+address.detailInfo,
					 goods: this.carts.map(v=>{
						 return {
							 goods_id:v.goods_id,
							 goods_number:v.num,
							 goods_price:v.goods_price
						 }
					 })
				 }
				 //发请求，获取订单的编号
				 // https://www.showdoc.com.cn/1408643559406641/6911784965082063
				 let result = await request({
					 method:"POST",
					 url:"my/orders/create",
					 data:params,
					 // 添加请求头
					 header:{
						 Authorization:uni.getStorageSync("token")
					 }
				 })
				 let order_number = result.message.order_number;
				 // console.log(order_number);
				 // 获取支付的参数
				 let result_pay = await request({
					 method:"post",
					 url:"my/orders/req_unifiedorder",
					 header:{
						  Authorization:uni.getStorageSync("token")
					 },
					 data:{
						 order_number
					 }
				 })
				 console.log(result_pay);
				 // 支付的参数
				 let payParams = result_pay.message.pay;
				 // 调用支付的接口
				 await requestPayment(payParams);
				 // 查询支付状态
				 let result_status = await request({
					 url:"my/orders/chkOrder",
					 method:"post",
					 header:{
						 Authorization:uni.getStorageSync("token")
					 },
					 data:{
						 order_number
					 }
					 
				 })
				 // 删除本地已支付的购物小车中商品的数据
				 // 支付之前的购物小车
				 let carts = uni.getStorageSync("carts")||[];
				 let current_carts = carts.filter(v=>!v.checked);
				 // 如果购物小车是从后台接口来的，这个时候我们更新后台的购物小车
				 uni.setStorageSync("carts",current_carts);
				 // 跳转到订单页面
				 uni.navigateTo({
					 url:"/pages/order/order"
				 })
				 // console.log(result_status);
				}catch(e){
					uni.showToast({
						title:"支付失败了！"
					})
				}
				
			}
		}
	}
</script>

<style lang="scss">
	.yg-pay {
		background-color: #f9f9f9;
		.yg-pay-content {
			height: calc(100vh - 80rpx);
			overflow-y: scroll;

			.pay-content-address {
				height: 190rpx;
				background-color: white;
				padding:20rpx;
				display: flex;
				align-item:center;
				justify-content: center;
				margin-bottom: 35rpx;
				.pay-content-detail{
					.content-address-all{
						color:#5d5d5d;
						font-size: 30rpx;
						margin-bottom: 30rpx;
					}
					.content-address-user{
						display: flex;
						.username{
							margin-right: 20rpx;
						}
						.telNumber{
							
						}
					}
				}
				.content-address-btn {
					width: 300rpx;
					height: 90rpx;
					line-height: 90rpx;
					text-align: center;
					border: 2px solid #EA4350;
					border-radius: 45rpx;
					color:#ee6c76;
					font-weight: 500;
				}
			}

			.pay-content-choose {
				background-color: white;
				.title {
					padding:10rpx;
					font-size:500;
				}

				.content-choose-list {
					.choose-list-item {
						height: 200rpx;
						padding:25rpx 25rpx 0 25rpx;
						display: flex;
						align-items: center;
						.list-item-left {
							display: flex;
							align-items: center;
							justify-content: center;
							image {
								height: 190rpx;
								width: 190rpx;
							}
						}

						.list-item-right {
							display: flex;
							flex-direction: column;
							height: 190rpx;
							justify-content: space-around;
							padding:5rpx;
							.list-item-top {
								font-size:24rpx;
								display: -webkit-box;
								-webkit-box-orient: vertical;
								-webkit-line-clamp: 2;
								overflow: hidden;
							}

							.list-item-bottom {
								display: flex;
								justify-content: space-between;
								.left {
									color:#ef717b;
									font-size: 24rpx;
								}

								.right {
										font-size: 24rpx;
								}
							}
						}
					}
				}
			}
		}
		.yg-pay-bottom {
			height: 80rpx;
			border-top: 2rpx solid #Ddd;
			display: flex;
			padding:5rpx;
			justify-content: space-between;
			align-items: center;
			.pay-bottom-left {
				.text {
					color:#eb4e5a;
				}
			}

			.pay-bottom-right {
				.bottom-right-btn {
					background-color: #ea4350;
					width: 150rpx;
					height: 50rpx;
					line-height: 50rpx;
					text-align: center;
					font-size:20rpx;
					color:white;
					border-radius: 26px;
				}
				.bottom-right-disable{
					background-color: #ddd;
					width: 150rpx;
					height: 50rpx;
					line-height: 50rpx;
					text-align: center;
					font-size:20rpx;
					color:white;
					border-radius: 26px;
				}
			}
		}
	}
</style>

```

## 支付问题小结

 ![img](大纲.assets/f7e06d16-c5f5-4fcd-9c38-d2983a8755db.png) 

![1625457725034](大纲.assets/1625457725034.png)

 ![img](大纲.assets/d58ffd7c-0e4f-46e7-ae24-90e88f2adba6.png) 

 ![img](大纲.assets/ae5da65b-0055-4f9a-b1e7-24ba09576220.png) 

解决思路

1. 检查一下你的Base_url,看一下是不是这个

```js
// export const BASE_URL = "https://api-hmugo-web.itheima.net/api/public/v1/"
export const BASE_URL = "https://www.xiaomage.tech/api/public/v1/"
```

2. 看自己的微信号是否没有添加到后台（老师的微信后台），没有的将微信号给我。

 ![img](大纲.assets/企业微信截图_16254594192913.png) 

3. 看appid 是不是老师的appid   wx45f217ba2cb42557

![1625467273392](大纲.assets/1625467273392.png)

4. 注意⚠️：出现`Error: Illegal Buffer`错误[说明](https://developers.weixin.qq.com/miniprogram/dev/framework/open-ability/signature.html)

总结：

> 导致问题的原因是：session_key没有及时更新

在调用wx.login()之前调用了wx.getUserProfile()。在调用getUseProfile()时将获取到 iv 和encryptedData 传给后台，而后调用login()，此时的session_key可能会被新的`session_key`覆盖，就会导致后台在对数据解密时使用新的session_key去解密旧的`encryptedData`，如此就会`Illegal Buffer`报错。

* 提前调用uni.login()

5. url 拼错了

![1625467411544](大纲.assets/1625467411544.png)

# 授权

步骤

1. 先获取用户登录的code，uni.login
2. 根据code和个人信息，换取登录需要的token

## 微信登录机制说明

分析：使用微信接口登录，一般需要code(api获取)，AppID(小程序ID)，AppSecret(小程序密钥)访问微信服务器，成功返回：1. openid是用户标识  2. session_key是解密用的（UnionID解密等）

说明：不建议客户端直接调用微信接口登录（不安全）；所以，开发者要搭建服务器由后端调用登录

结论：调用失败，是由于**当前开发者AppID和服务器不一致**造成

![image-20210224101152837](大纲.assets/image-20210224101152837.png)

注意：

登录需要的后端接口appid: wx38d8faffac4d34d2（需要该appid拥有者**添加开发者权限**）



> 名词解释

- `code` 临时登录凭证, 有效期五分钟, 通过 `uni.login()` 获取
- `session_key` 会话密钥, 服务端通过 [code2Session](https://developers.weixin.qq.com/miniprogram/dev/api/open-api/login/code2Session.html) 获取
- `openId` 用户在该小程序下的用户唯一标识, 永远不变, 服务端通过 code 获取
- `unionId` 用户在同一个微信开放平台帐号(公众号, 小程序, 网站, 移动应用)下的唯一标识, 永远不变
- `appId` 小程序唯一标识
- `appSecret` 小程序的 app secret, 可以和 code, appId 一起换取 session_key

其他名词

- `rawData` 不包括敏感信息的原始数据字符串，用于计算签名
- `encryptedData` 包含敏感信息的用户信息, 是加密的
- `signature` 用于校验用户信息是否无篡改
- `iv` 加密算法的初始向量

扩展阅读：[微信登录](https://developers.weixin.qq.com/miniprogram/dev/api/open-api/login/wx.login.html)

落地代码

```vue
<template>
	<view>
		<button type="primary" @click="getToken">授权微信登录</button>
	</view>
</template>

<script>
	import {
		getUserProfile,
		login
	} from "@/ajaxUtil/index.js"
	import {request} from "@/request/request.js"
	export default {
		data() {
			return {
				code:""
			};
		},
		async onLoad() {
			let res2 = await login();
			let { code } = res2;
			this.code = code;
		},
		methods: {
			getToken: async function() {
				let res1 = await getUserProfile();
				let { encryptedData,rawData,iv,signature} = res1;
				// 开始发请求获取 token 
				let res3 = await request({
					url:"users/wxlogin",
					data:{
						encryptedData,rawData,iv,signature,code:this.code
					},
					method:"POST"
				})
				// 获取token 
				let token = res3.message.token;
				// 存到本地
				uni.setStorageSync("token",token);
				// 跳回上一级页面
				wx.navigateBack({
					delta:-1
				})
				// console.log(res3);
			}
		}
	}
</script>

<style lang="scss">

</style>

```



# 订单

```vue
<template>
	<view>
		<view class="pyg_order">
		  <!-- 顶部tab栏开始 -->
		  <Tabs :tabs="tabs" @mytab="handleTabsChange" />
		  <!-- 顶部tab栏结束 -->
		  <view v-if="tabs[0].isActive">
		    <!-- 全部订单开始 -->
		    <view class="order_list">
		      <view class="order_list_item" v-for="(item,index) in orders" :key="index">
		        <view class="order_number_sec">
		          <view class="text">订单编号</view>
		          <view class="content">{{item.order_number}}</view>
		        </view>
		        <view class="order_price_sec">
		          <view class="text">订单金额</view>
		          <view class="content">￥{{item.order_price}}</view>
		        </view>
		        <view class="order_date_sec">
		                  <view class="text">订单日期</view>
		          <view class="content">￥{{item.create_time_cn}}</view>
		        </view>
		      </view>
		    </view>
		    <!-- 全部订单结束 -->
		  </view>
		  <view v-else-if="tabs[1].isActive">
		    2
		  </view>
		  <view v-else>
		    3
		  </view>
		
		</view>
	</view>
</template>

<script>
	import Tabs from "@/components/Tabs.vue"
	import { request } from "@/request/request.js"
	export default {
		components:{
			Tabs
		},
		data() {
			return {
				    orders: [],
				    tabs: [{
				      id: 0,
				      text: "全部",
				      isActive: true,
				      type: 1,
				    }, {
				      id: 1,
				      text: "待付款",
				      isActive: false,
				      type: 2,
				    }, {
				      id: 2,
				      text: "待发货",
				      isActive: false,
				      type: 3, //订单类型
				    }]
			};
		},
		onLoad:function(options){
			   this.getOrderList();
		},
		methods:{
			  //获取订单数据
			  getOrderList: async function() {
			    //找到现在被激活的菜单
			    let activeTab = this.tabs.filter(v => v.isActive);
			    // 请求 拿到对应 type 的数据
			    let res = await request({
			      url: "my/orders/all",
				  header:{
					  "Authorization":uni.getStorageSync("token")
				  },
			      data: {
			        type: activeTab[0].type
			      }
			    })
				this.orders = res.message.orders.map(v => ({
				  ...v,
				  create_time_cn: (new Date(v.create_time * 1000).toLocaleString())
				}))
			  },
			  //tabs 菜单的监听事件 用于子向父传值
			  handleTabsChange(tabs) {
			    tabs.map((v, index) => v.type = index + 1);
				this.tabs = tabs;
			  }
		}
	}
</script>

<style lang="less">
.pyg_order .order_list {
  height: 100vh;
  background-color: #f9f9f9;
}
.pyg_order .order_list .order_list_item {
  height: 250rpx;
  border-bottom: 13rpx solid #f9f9f9;
}
.pyg_order .order_list .order_list_item .order_number_sec {
  padding: 32rpx 32rpx 0 32rpx;
  display: flex;
  align-items: center;
  justify-content: space-between;
}
.pyg_order .order_list .order_list_item .order_number_sec .text {
  font-size: 30rpx;
  color: #696969;
}
.pyg_order .order_list .order_list_item .order_number_sec .content {
  font-size: 30rpx;
  color: #696969;
}
.pyg_order .order_list .order_list_item .order_price_sec {
  padding: 32rpx 32rpx 0 32rpx;
  display: flex;
  align-items: center;
  justify-content: space-between;
}
.pyg_order .order_list .order_list_item .order_price_sec .text {
  font-size: 30rpx;
  color: #696969;
}
.pyg_order .order_list .order_list_item .order_price_sec .content {
  font-size: 30rpx;
  color: var(--themeColor);
}
.pyg_order .order_list .order_list_item .order_date_sec {
  padding: 32rpx 32rpx 0 32rpx;
  display: flex;
  align-items: center;
  justify-content: space-between;
}
.pyg_order .order_list .order_list_item .order_date_sec .text {
  font-size: 30rpx;
  color: #696969;
}
.pyg_order .order_list .order_list_item .order_date_sec .content {
  font-size: 30rpx;
  color: #696969;
}

</style>
```



# 我的

步骤

1. 完成页面整体布局，通过getUserProfile获取用户个人信息
2. 配置反馈页面的分包设置

落地代码

```vue
<template>
	<view>
		<view class="pyg_user">
			<!-- 个人信息开始 -->
			<view class="user_profile">
				<block v-if="userInfo.nickName">
					<!-- 图片背景开始 -->
					<view class="user_profile_bg">
						<image :src="userInfo.avatarUrl"></image>
					</view>
					<!-- 图片背景结束 -->
					<!-- 个人图片开始 -->
					<view class="image_wrapper">
						<image :src="userInfo.avatarUrl"></image>
					</view>
					<!-- 个人图片结束 -->
					<!-- 个人昵称开始 -->
					<view class="user_nickname">{{userInfo.nickName}}</view>
					<!-- 个人昵称结束 -->
				</block>
				<block v-else>
					<button class="userinfo_button" type="warn" plain @click="handleGetUserInfo">
						登录
					</button>
				</block>

			</view>
			<!-- 个人信息结束 -->
			<!-- 订单功能区开始 -->
			<view class="order_func">
				<navigator url="/pages/order/order?type=2" class="order_to_pay">
					<view class="iconfont icon-icon-test"></view>
					<view class="text">代收款</view>
				</navigator>
				<navigator url="/pages/order/order?type=3" class="order_to_recieve">
					<view class="iconfont icon-daishouhuo"></view>
					<view class="text">待收货</view>
				</navigator>
				<navigator url="/pages/order/order?type=1" class="order_to_drawback">
					<view class="iconfont icon-tuikuan"></view>
					<view class="text">退货/退款</view>
				</navigator>
				<navigator url="/pages/order/order?type=1" class="order_all">
					<view class="iconfont icon-quanbudingdan"></view>
					<view class="text">全部订单</view>
				</navigator>

			</view>
			<!-- 订单功能区结束 -->
			<!-- 系统功能列表开始 -->
			<view class="system_func">
				<view class="func_list_item">
					<view class="left">
						<text class="iconfont icon-lianxikefu"></text>
						<text class="text">联系客服</text>
					</view>
					<view class="right">
						400-618-4000
					</view>
				</view>
				<!-- 意见反馈开始 -->
				<navigator url="/page/feedback/feedback" class="func_list_item">
					<view class="left">
						<text class="iconfont icon-yijianfankui"></text>
						<text class="text">意见反馈</text>
					</view>
				</navigator>
				<!-- 意见反馈结束 -->
				<!-- 当前版本开始 -->
				<view class="func_list_item">
					<view class="left">
						<text class="iconfont icon-ziyuan"></text>
						<text class="text">当前版本</text>
					</view>
					<view class="right">
						v4.1.1
					</view>
				</view>
				<!-- 当前版本结束 -->
			</view>
			<!-- 系统功能列表结束 -->

		</view>
	</view>
</template>

<script>
	export default {
		/**
		 * 生命周期函数--监听页面加载
		 */
		onLoad: function(options) {
			//从storage里面获取用户的信息
			let userInfo = uni.getStorageSync("userInfo") || {};
			this.userInfo = userInfo;
		},
		data() {
			return {
				userInfo: {} //用户信息
			}
		},
		methods: {
			//获取用户信息
			handleGetUserInfo: function() {
				
				uni.getUserProfile({
					desc: "获取用户的个人信息",
					success: (e) => {
						console.log(e);
						//2. 存到 storage中 页面初始化的时候 可以获取
						// debugger
						this.userInfo = e.userInfo;
						uni.setStorageSync("userInfo", e.userInfo);
					}
				})

			},
		}
	}
</script>

<style>
	.pyg_user {
		background-color: #f9f9f9;
		height: 100vh;
		/* 系统功能区 */
	}

	.pyg_user .user_profile {
		height: 329rpx;
		width: 750rpx;
		background-color: white;
		position: relative;
	}

	.pyg_user .user_profile .user_profile_bg {
		height: 329rpx;
		filter: blur(28rpx);
	}

	.pyg_user .user_profile .user_profile_bg image {
		height: 100%;
		width: 100%;
	}

	.pyg_user .user_profile .image_wrapper {
		position: absolute;
		left: 289rpx;
		top: 32rpx;
	}

	.pyg_user .user_profile .image_wrapper image {
		border-radius: 50%;
		height: 172rpx;
		width: 172rpx;
	}

	.pyg_user .user_profile .user_nickname {
		width: 100vw;
		position: absolute;
		text-align: center;
		top: 220rpx;
		font-size: 32rpx;
		color: white;
	}

	.pyg_user .user_profile .userinfo_button {
		position: absolute;
		left: 50%;
		transform: translateX(-50%);
		top: 20%;
		width: 500rpx;
	}

	.pyg_user .order_func {
		height: 144rpx;
		margin: 20rpx 12rpx;
		width: calc(100vw - 24rpx);
		display: flex;
		align-items: center;
		background-color: white;
	}

	.pyg_user .order_func .order_to_pay {
		flex: 1;
		display: flex;
		flex-direction: column;
		align-items: center;
	}

	.pyg_user .order_func .order_to_pay .iconfont.icon-icon-test {
		font-size: 50rpx;
	}

	.pyg_user .order_func .order_to_pay .text {
		font-size: 26rpx;
	}

	.pyg_user .order_func .order_to_recieve {
		flex: 1;
		text-align: center;
	}

	.pyg_user .order_func .order_to_recieve .iconfont.icon-daishouhuo {
		font-size: 50rpx;
	}

	.pyg_user .order_func .order_to_recieve .text {
		font-size: 26rpx;
	}

	.pyg_user .order_func .order_to_drawback {
		flex: 1;
		text-align: center;
	}

	.pyg_user .order_func .order_to_drawback .iconfont.icon-tuikuan {
		font-size: 50rpx;
	}

	.pyg_user .order_func .order_to_drawback .text {
		font-size: 26rpx;
	}

	.pyg_user .order_func .order_all {
		flex: 1;
		text-align: center;
	}

	.pyg_user .order_func .order_all .iconfont.icon-quanbudingdan {
		font-size: 50rpx;
	}

	.pyg_user .order_func .order_all .text {
		font-size: 26rpx;
	}

	.pyg_user .system_func {
		height: 520rpx;
		margin: 0 12rpx;
		width: calc(100vw - 24rpx);
		background-color: white;
	}

	.pyg_user .system_func .func_list_item {
		height: 101rpx;
		width: 726rpx;
		display: flex;
		justify-content: space-between;
		align-items: center;
		border-bottom: 1rpx solid #c8c8c8;
		color: #434343;
	}

	.pyg_user .system_func .func_list_item .left {
		display: flex;
		align-items: center;
	}

	.pyg_user .system_func .func_list_item .left .iconfont {
		margin: 0 28rpx 0 40rpx;
		font-size: 45rpx;
	}

	.pyg_user .system_func .func_list_item .left text.text {
		font-size: 26rpx;
	}

	.pyg_user .system_func .func_list_item .right {
		font-size: 26rpx;
		margin-right: 46rpx;
	}
</style>

```

反馈页面的分包设置

在pages.json添加

```json
	"subPackages":[{
			"root":"page",
			"pages":[
				{
					"path":"feedback/feedback",
					"style":{
						"navigationBarTitleText": "反馈页面",
						"enablePullDownRefresh": false
					}
				}
			]
		}
	]
```

# 微信上线&&打包（android测试包）

点击上传

![1629280839371](大纲.assets/1629280839371.png)

登录微信公众号后台

![1629280904505](大纲.assets/1629280904505.png)

![1629280923970](大纲.assets/1629280923970.png)

![1629280941414](大纲.assets/1629280941414.png)

![1629280994768](大纲.assets/1629280994768.png)

![1629281019270](大纲.assets/1629281019270.png)

![1629281031830](大纲.assets/1629281031830.png)

![1629281066813](大纲.assets/1629281066813.png)

## android打包

![1629281172952](大纲.assets/1629281172952.png)

![1629281243150](大纲.assets/1629281243150.png)

![1629281320210](大纲.assets/1629281320210.png)